!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common"),require("@angular/material/button"),require("@angular/material/icon")):"function"==typeof define&&define.amd?define("ngx-input-file",["exports","@angular/core","@angular/forms","@angular/common","@angular/material/button","@angular/material/icon"],t):t(e["ngx-input-file"]={},e.ng.core,e.ng.forms,e.ng.common,e.ng.material.button,e.ng.material.icon)}(this,function(e,i,n,r,o,a){"use strict";var l=function(e,t,i){this.id=e,this.preview=t,this.file=i},c={badFile:0,limitReached:1,sizeReached:2};function u(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}c[c.badFile]="badFile",c[c.limitReached]="limitReached",c[c.sizeReached]="sizeReached";var s=function(){function e(e){this._config=e}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),e.prototype.limitGuard=function(e,t){return e.length<t},e.prototype.sizeGuard=function(e,t){return!t||e.size<1024*t*1024},e.prototype.typeGuard=function(e,t){var i,n,r=null==t;if(t){var o=t.replace("*","").split(",");try{for(var a=u(o),l=a.next();!l.done;l=a.next()){var c=l.value;if(e.type.startsWith(c)||"."===c.charAt(0)&&null!=e.name&&e.name.endsWith(c)){r=!0;break}}}catch(s){i={error:s}}finally{try{l&&!l.done&&(n=a["return"])&&n.call(a)}finally{if(i)throw i.error}}}return r},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:undefined,decorators:[{type:i.Inject,args:["config"]}]}]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject("config"))},token:e,providedIn:"root"}),e}(),p=function(){function e(e){this.inputFileService=e,this.acceptedFile=new i.EventEmitter,this.deletedFile=new i.EventEmitter,this.rejectedFile=new i.EventEmitter,this.files=new Array,this.onChange=function(e){},this.onTouched=function(){}}return Object.defineProperty(e.prototype,"fileAccept",{get:function(){return this._fileAccept||this.inputFileService.config.fileAccept||"*"},set:function(e){this._fileAccept=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileLimit",{get:function(){return this._fileLimit||this.inputFileService.config.fileLimit||1},set:function(e){this._fileLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeLimit",{get:function(){return this._sizeLimit||this.inputFileService.config.sizeLimit||null},set:function(e){this._sizeLimit=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canAddFile",{get:function(){return this.files&&this.files.length<this.fileLimit},enumerable:!0,configurable:!0}),e.prototype.onDeleteFile=function(e){if(!this.disabled){var t=this.files.slice();this.deletedFile.emit(t[e]),t.splice(e,1),this.writeValue(t)}},e.prototype.onDragOver=function(e){e.ripple.launch({centered:!0,persistent:!0})},e.prototype.onDragLeave=function(e){e.ripple.fadeOutAll()},e.prototype.onReplaceFile=function(e,t,i,n){if(!this.disabled){var r=this.files.slice(),o=new l(null,null,e.item(0));i.ripple.fadeOutAll(),this.fileGuard(r,o,!0)&&(r[t]=o,this.acceptedFile.emit(o)),this.writeValue(r),n&&(n.value="")}},e.prototype.onSelectFile=function(e,t){var i=this;if(!this.disabled){t.ripple.fadeOutAll();var n=this.files.slice();Array.from(e).forEach(function(e){var t=new l(null,null,e);i.fileGuard(n,t)&&(n.push(t),i.acceptedFile.emit(t))}),this.writeValue(n),this.fileInput.nativeElement.value=""}},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){this.disabled||(this.files=e,this.setFilePreview(),this.onChange(this.files))},e.prototype.fileGuard=function(e,t,i){return i||this.inputFileService.limitGuard(e,this.fileLimit)?this.inputFileService.sizeGuard(t.file,this.sizeLimit)?!!this.inputFileService.typeGuard(t.file,this.fileAccept)||(this.rejectedFile.emit({reason:c.badFile,file:t}),!1):(this.rejectedFile.emit({reason:c.sizeReached,file:t}),!1):(this.rejectedFile.emit({reason:c.limitReached,file:t}),!1)},e.prototype.setFilePreview=function(){var i=this,e=function(e){if(null!=n.files[e].file&&n.inputFileService.typeGuard(n.files[e].file,"image/*")){var t=new FileReader;t.onload=function(){i.files[e].preview=t.result},t.readAsDataURL(n.files[e].file)}},n=this;for(var t in this.files)e(t)},e.decorators=[{type:i.Component,args:[{selector:"input-file",template:'<div class="input-file-container" [style.width.%]="width" [style.height.%]="height">\n    <label class="mat-orphan-label" [for]="inputId" [class.active]="files?.length" [innerHtml]="placeholder" *ngIf="placeholder"></label>\n    <div class="files-container" [style.width.%]="width" [style.height.%]="height">\n\n        <ng-container *ngFor="let file of files; let i = index">\n            <div class="file-container bounce-in" [style.width.%]="widthPreview" [style.height.%]="heightPreview">\n                <button mat-button inputFileDropZone class="replace-button" type="button" (click)="fileReplace.click()" (itemDrop)="onReplaceFile($event, i,replaceButton)"\n                    [disabled]="disabled" (itemDragOver)="onDragOver(replaceButton)" (itemDragLeave)="onDragLeave(replaceButton)"\n                    #replaceButton>\n                    <img class="image-preview" [src]="file.preview" *ngIf="file.preview; else noPreview">\n                    <ng-template #noPreview>\n                        <mat-icon class="input-icon">insert_drive_file</mat-icon>\n                        <div class="file-name text-truncate" [innerHtml]="file.file.name" *ngIf="file.file"></div>\n                    </ng-template>\n\n                </button>\n                <button mat-button class="delete-button" type="button" [style.width.%]="widthPreview" (click)="onDeleteFile(i)" [disabled]="disabled">\n                    <mat-icon>delete</mat-icon>\n                </button>\n            </div>\n            <input [accept]="fileAccept" hidden type="file" #fileReplace (change)="onReplaceFile($event.target.files, i, replaceButton, fileReplace)">\n        </ng-container>\n\n        <ng-container *ngIf="canAddFile">\n            <button mat-button inputFileDropZone class="file-button" type="button" (click)="fileInput.click()" (itemDrop)="onSelectFile($event, selectButton)"\n                (itemDragOver)="onDragOver(selectButton)" (itemDragLeave)="onDragLeave(selectButton)" [style.width.%]="width" [style.height.%]="height"\n                 [disabled]="disabled" #selectButton>\n                <mat-icon class="input-icon">add</mat-icon>\n                <div [innerHtml]="internalPlaceholder" *ngIf="internalPlaceholder"></div>\n            </button>\n            <input [id]="inputId" [accept]="fileAccept" hidden type="file" [attr.multiple]="fileLimit > 1 ? true : null" #fileInput (change)="onSelectFile($event.target.files, selectButton)">\n        </ng-container>\n    </div>\n\n</div>',styles:[".input-file-container{position:relative}.input-file-container .files-container{display:flex;flex-direction:row;flex-wrap:wrap;padding-top:1.25rem}.input-file-container .file-button,.input-file-container .file-container{align-items:center;display:flex;height:10rem;justify-content:center;width:10rem}.input-file-container .delete-button{width:10rem}.input-file-container .file-container{flex-direction:column;margin-right:1rem}.input-file-container .replace-button{flex:1;width:10rem}.input-file-container .mat-button:focus{outline:0}.input-file-container .file-name{width:calc(10rem - 2.5rem)}.input-file-container .image-preview{margin:0 -16px;height:10rem;-o-object-fit:contain;object-fit:contain;width:10rem}.input-file-container .input-icon{font-size:calc(10rem / 4);height:calc(10rem / 4);width:calc(10rem / 4)}.input-file-container .mat-orphan-label{color:rgba(0,0,0,.54);display:block;font-size:1rem;left:0;margin:0;position:absolute;top:0;-webkit-transform-origin:0;transform-origin:0;transition:.4s cubic-bezier(.25,.8,.25,1),width .4s cubic-bezier(.25,.8,.25,1)}.input-file-container .mat-orphan-label.active{-webkit-transform:scale(.75);transform:scale(.75)}@-webkit-keyframes bounceIn{20%,40%,60%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}20%{-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}40%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}60%{opacity:1;-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}80%{-webkit-transform:scale3d(.97,.97,.97);transform:scale3d(.97,.97,.97)}to{opacity:1;-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}}@keyframes bounceIn{20%,40%,60%,80%,from,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;-webkit-transform:scale3d(.3,.3,.3);transform:scale3d(.3,.3,.3)}20%{-webkit-transform:scale3d(1.1,1.1,1.1);transform:scale3d(1.1,1.1,1.1)}40%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}60%{opacity:1;-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}80%{-webkit-transform:scale3d(.97,.97,.97);transform:scale3d(.97,.97,.97)}to{opacity:1;-webkit-transform:scale3d(1,1,1);transform:scale3d(1,1,1)}}.bounce-in{-webkit-animation-duration:.75s;animation-duration:.75s;-webkit-animation-name:bounceIn;animation-name:bounceIn}"],providers:[{provide:n.NG_VALUE_ACCESSOR,useExisting:i.forwardRef(function(){return e}),multi:!0}]}]}],e.ctorParameters=function(){return[{type:s}]},e.propDecorators={disabled:[{type:i.Input}],inputId:[{type:i.Input}],placeholder:[{type:i.Input}],internalPlaceholder:[{type:i.Input}],width:[{type:i.Input}],height:[{type:i.Input}],widthPreview:[{type:i.Input}],heightPreview:[{type:i.Input}],fileAccept:[{type:i.Input}],fileLimit:[{type:i.Input}],sizeLimit:[{type:i.Input}],acceptedFile:[{type:i.Output}],deletedFile:[{type:i.Output}],rejectedFile:[{type:i.Output}],fileInput:[{type:i.ViewChild,args:["fileInput"]}]},e}(),f=function(){function e(){this.disabled=!1,this.itemDragOver=new i.EventEmitter,this.itemDragLeave=new i.EventEmitter,this.itemDrop=new i.EventEmitter,this.whiteListClasses=["file-button","mat-button-wrapper","input-icon"]}return e.prototype.onDragOver=function(e){this.preventAndStopEventPropagation(e),this.isOver||this.disabled||(this.isOver=!0,this.itemDragOver.emit())},e.prototype.onDragLeave=function(e){this.preventAndStopEventPropagation(e),this.isOver&&this.isTrueLeave(e)&&!this.disabled&&(this.isOver=!1,this.itemDragLeave.emit())},e.prototype.onDrop=function(e){if(!this.disabled&&e instanceof DragEvent){this.preventAndStopEventPropagation(e),this.isOver=!1;try{this.itemDrop.emit(e.dataTransfer.files)}catch(t){console.error(t)}}},e.prototype.preventAndStopEventPropagation=function(e){e.preventDefault(),e.stopPropagation()},e.prototype.isTrueLeave=function(e){try{for(var t=u(this.whiteListClasses),i=t.next();!i.done;i=t.next()){var n=i.value;if(null!=e.fromElement&&0<=e.fromElement.className.indexOf(n))return!1}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=t["return"])&&o.call(t)}finally{if(r)throw r.error}}return!0;var r,o},e.decorators=[{type:i.Directive,args:[{selector:"[inputFileDropZone]"}]}],e.propDecorators={disabled:[{type:i.Input}],itemDragOver:[{type:i.Output}],itemDragLeave:[{type:i.Output}],itemDrop:[{type:i.Output}],onDragOver:[{type:i.HostListener,args:["dragover",["$event"]]}],onDragLeave:[{type:i.HostListener,args:["dragleave",["$event"]]}],onDrop:[{type:i.HostListener,args:["drop",["$event"]]}]},e}(),t=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[s,{provide:"config",useValue:e}]}},t.decorators=[{type:i.NgModule,args:[{declarations:[f,p],imports:[r.CommonModule,n.FormsModule,o.MatButtonModule,a.MatIconModule],exports:[p],providers:[s],entryComponents:[p]}]}],t}();e.InputFile=l,e.InputFileComponent=p,e.InputFileModule=t,e.InputFileService=s,e.ɵb=f,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-input-file.umd.min.js.map